---

---

<button
    id="floating-close-btn"
    class="fixed top-4 right-4 z-50 flex items-center justify-center bg-white text-gray-800 shadow-lg hover:shadow-xl transition-all duration-300 border border-gray-200 rounded-full group cursor-pointer"
    aria-label="Chiudi pagina"
>
    <!-- Mobile: X Icon -->
    <span class="p-3 md:hidden">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M6 18L18 6M6 6l12 12"></path>
        </svg>
    </span>

    <!-- Desktop: Text + Icon -->
    <span class="hidden md:flex items-center px-6 py-3 font-medium text-sm">
        <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5 mr-2 transform group-hover:-translate-x-1 transition-transform"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
        >
            <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        Torna all'offerta
    </span>
</button>

<script>
    const btn = document.getElementById("floating-close-btn");
    if (btn) {
        btn.addEventListener("click", () => {
            // Try to close the window (works if opened via script/target="_blank")
            window.close();

            // Fallback: if window.close() is blocked or doesn't work,
            // check if we can navigate back or to home.
            // A simple way to fallback is to check if window is still open after a short delay,
            // but simpler is to just redirect if close fails (which is hard to detect synchronously).
            // However, usually if window.close() fails, it just warns in console.
            // We can try to navigate to home as a fallback if it's not a popup.

            setTimeout(() => {
                if (!window.closed) {
                    window.location.href = "/";
                }
            }, 100);
        });
    }
</script>
